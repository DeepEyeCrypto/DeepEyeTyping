/*
 * DeepEyeTyping Component Styles
 * Responsive Glass UI - Stage R2, R3, R5
 *
 * Glass card styles, typing area, keyboard, etc.
 */

/* ============================================
   GLASS CARD COMPONENT
   ============================================ */

.glass-card {
    background: var(--gradient-glass-surface, linear-gradient(135deg, rgba(255, 255, 255, 0.07), rgba(255, 255, 255, 0.02)));
    background-color: var(--glass-bg, rgba(255, 255, 255, 0.08));
    border-radius: var(--radius-xl, 24px);
    border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.2));
    box-shadow: var(--glass-shadow, 0 18px 45px rgba(15, 23, 42, 0.45));
    backdrop-filter: blur(var(--blur-lg, 18px)) saturate(1.5);
    -webkit-backdrop-filter: blur(var(--blur-lg, 18px)) saturate(1.5);
    padding: var(--space-lg, 1.5rem);
    transition:
        background-color var(--transition-normal, 160ms ease-out),
        box-shadow var(--transition-normal, 160ms ease-out),
        transform var(--transition-normal, 160ms ease-out),
        border-color var(--transition-normal, 160ms ease-out);
}

/* Interactive glass card */
.glass-card-interactive {
    cursor: pointer;
}

.glass-card-interactive:hover {
    background-color: var(--glass-bg-hover, rgba(255, 255, 255, 0.14));
    transform: translateY(-2px);
    box-shadow: var(--glass-shadow-hover, 0 22px 55px rgba(15, 23, 42, 0.55));
    border-color: var(--glass-border-hover, rgba(255, 255, 255, 0.35));
}

.glass-card-interactive:active {
    transform: translateY(0);
    box-shadow: var(--glass-shadow-active, 0 12px 28px rgba(15, 23, 42, 0.45));
}

.glass-card-interactive:focus-visible {
    outline: 2px solid var(--accent-cyan, #00fff2);
    outline-offset: 3px;
}

/* Card sizes */
.glass-card-sm {
    padding: var(--space-md, 1rem);
    border-radius: var(--radius-lg, 18px);
}

.glass-card-lg {
    padding: var(--space-xl, 2rem);
    border-radius: var(--radius-2xl, 32px);
}

/* ============================================
   METRICS / KPI CARDS
   ============================================ */

.metric-card {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm, 0.75rem);
    padding: var(--space-lg, 1.5rem);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.01));
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: var(--radius-2xl, 32px);
    position: relative;
    overflow: hidden;
}

.metric-card::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    filter: blur(40px);
    opacity: 0;
    transition: opacity var(--transition-slow, 240ms ease-out);
}

.metric-card:hover::before {
    opacity: 0.15;
}

.metric-card-cyan::before {
    background: var(--accent-cyan, #00fff2);
}

.metric-card-purple::before {
    background: var(--accent-purple, #bc13fe);
}

.metric-card-green::before {
    background: var(--accent-green, #4ade80);
}

.metric-label {
    font-size: var(--font-size-xs, 0.625rem);
    font-weight: var(--font-black, 900);
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--text-tertiary, rgba(255, 255, 255, 0.3));
}

.metric-value {
    font-size: var(--font-size-3xl, 1.875rem);
    font-weight: var(--font-black, 900);
    font-style: italic;
    color: var(--text-primary, #f1f5f9);
    line-height: var(--leading-tight, 1.1);
}

.metric-unit {
    font-size: var(--font-size-xs, 0.625rem);
    font-weight: var(--font-black, 900);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-tertiary, rgba(255, 255, 255, 0.2));
}

/* Responsive metric card */
@media (max-width: 768px) {
    .metric-card {
        padding: var(--space-md, 1rem);
    }

    .metric-value {
        font-size: var(--font-size-2xl, 1.5rem);
    }
}

/* ============================================
   TYPING AREA
   ============================================ */

.typing-container {
    width: 100%;
    max-width: 960px;
    margin: 0 auto;
    padding: var(--space-lg, 1.5rem);
}

@media (max-width: 768px) {
    .typing-container {
        padding: var(--space-md, 1rem);
    }
}

@media (max-width: 480px) {
    .typing-container {
        padding: var(--space-sm, 0.75rem);
    }
}

.typing-text {
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: clamp(1rem, 0.875rem + 0.5vw, 1.5rem);
    line-height: var(--leading-relaxed, 1.625);
    letter-spacing: 0.02em;
    word-break: break-word;
    white-space: pre-wrap;
}

@media (max-width: 480px) {
    .typing-text {
        font-size: clamp(0.875rem, 0.75rem + 0.5vw, 1rem);
    }
}

/* Character states */
.char-correct {
    color: var(--text-secondary, #94a3b8);
}

.char-incorrect {
    color: var(--text-error, #f87171);
    background: rgba(248, 113, 113, 0.15);
    border-radius: 2px;
}

.char-current {
    color: var(--text-primary, #f1f5f9);
    position: relative;
    z-index: 10;
}

.char-pending {
    color: var(--text-tertiary, rgba(255, 255, 255, 0.15));
}

.char-buffer {
    color: var(--text-tertiary, rgba(255, 255, 255, 0.3));
}

/* Cursor animation */
.typing-cursor {
    position: absolute;
    top: 0;
    left: 0;
    border-radius: var(--radius-sm, 8px);
    background: rgba(0, 255, 242, 0.3);
    border: 2px solid rgba(0, 255, 242, 0.6);
    backdrop-filter: blur(1px);
    pointer-events: none;
    will-change: transform, left, top;
    transform: translateZ(0);
}

.typing-cursor.error {
    background: rgba(248, 113, 113, 0.2);
    border-color: rgba(248, 113, 113, 0.8);
}

/* ============================================
   VIRTUAL KEYBOARD
   ============================================ */

.keyboard-container {
    width: 100%;
    max-width: 65em;
    margin: 0 auto;
    padding: var(--space-lg, 1.5rem);
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-2xl, 32px);
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(var(--blur-xl, 24px));
    -webkit-backdrop-filter: blur(var(--blur-xl, 24px));
}

@media (max-width: 768px) {
    .keyboard-container {
        padding: var(--space-md, 1rem);
        border-radius: var(--radius-xl, 24px);
    }
}

@media (max-width: 480px) {
    .keyboard-container {
        padding: var(--space-sm, 0.75rem);
        border-radius: var(--radius-lg, 18px);
    }
}

.keyboard-grid {
    display: grid;
    grid-template-columns: repeat(14, minmax(0, 1fr));
    gap: var(--space-xs, 0.4em);
}

@media (max-width: 768px) {
    .keyboard-grid {
        grid-template-columns: repeat(12, minmax(0, 1fr));
    }
}

@media (max-width: 480px) {
    .keyboard-grid {
        grid-template-columns: repeat(10, minmax(0, 1fr));
        gap: 2px;
    }
}

.keyboard-key {
    aspect-ratio: 1;
    min-height: 2.5em;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-md, 12px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    background: rgba(255, 255, 255, 0.03);
    color: rgba(255, 255, 255, 0.3);
    font-family: 'JetBrains Mono', monospace;
    font-size: var(--font-size-sm, 0.75rem);
    font-weight: var(--font-bold, 700);
    letter-spacing: 0.05em;
    transition:
        transform var(--transition-fast, 120ms ease-out),
        background-color var(--transition-fast, 120ms ease-out),
        box-shadow var(--transition-fast, 120ms ease-out),
        border-color var(--transition-fast, 120ms ease-out),
        color var(--transition-fast, 120ms ease-out);
    user-select: none;
    -webkit-user-select: none;
}

.keyboard-key:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.6);
}

.keyboard-key.active {
    background: rgba(255, 255, 255, 0.12);
    border-color: rgba(255, 255, 255, 0.4);
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
}

.keyboard-key.pressed {
    background: var(--accent-cyan, #00fff2);
    border-color: var(--accent-cyan, #00fff2);
    color: #000;
    box-shadow: 0 0 30px rgba(0, 255, 242, 0.6);
    transform: translateY(1px);
}

/* Key sizes */
.keyboard-key.wide {
    aspect-ratio: auto;
    min-width: 4em;
}

.keyboard-key.wide-sm {
    aspect-ratio: auto;
    min-width: 2.5em;
}

/* Finger indicator */
.key-finger-indicator {
    position: absolute;
    bottom: 4px;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    opacity: 0.6;
}

/* Key legend */
.keyboard-legend {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--space-md, 1rem);
    margin-top: var(--space-md, 1rem);
    padding-top: var(--space-md, 1rem);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
}

@media (max-width: 768px) {
    .keyboard-legend {
        display: none;
    }
}

.legend-item {
    display: flex;
    align-items: center;
    gap: var(--space-xs, 0.5rem);
    font-size: var(--font-size-xs, 0.625rem);
    font-weight: var(--font-bold, 700);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: rgba(255, 255, 255, 0.4);
}

/* ============================================
   DASHBOARD COMPONENTS
   ============================================ */

.dashboard-header {
    display: flex;
    flex-direction: column;
    gap: var(--space-md, 1rem);
    padding: var(--space-xl, 2rem);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.07), rgba(255, 255, 255, 0.02));
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: var(--radius-3xl, 40px);
    position: relative;
    overflow: hidden;
}

@media (max-width: 768px) {
    .dashboard-header {
        padding: var(--space-lg, 1.5rem);
        border-radius: var(--radius-2xl, 32px);
    }
}

.dashboard-title {
    font-size: var(--font-size-3xl, 1.875rem);
    font-weight: var(--font-black, 900);
    font-style: italic;
    color: var(--text-primary, #f1f5f9);
    line-height: var(--leading-tight, 1.1);
}

@media (max-width: 768px) {
    .dashboard-title {
        font-size: var(--font-size-2xl, 1.5rem);
    }
}

/* ============================================
   BUTTONS
   ============================================ */

.btn-glass {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm, 0.75rem);
    padding: var(--space-md, 1rem) var(--space-lg, 1.5rem);
    font-size: var(--font-size-xs, 0.625rem);
    font-weight: var(--font-black, 900);
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--text-primary, #f1f5f9);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.02));
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: var(--radius-lg, 18px);
    cursor: pointer;
    transition:
        background-color var(--transition-normal, 160ms ease-out),
        transform var(--transition-normal, 160ms ease-out),
        box-shadow var(--transition-normal, 160ms ease-out),
        border-color var(--transition-normal, 160ms ease-out);
}

.btn-glass:hover {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}

.btn-glass:active {
    transform: translateY(0);
}

.btn-glass:focus-visible {
    outline: 2px solid var(--accent-cyan, #00fff2);
    outline-offset: 3px;
}

/* Primary variant */
.btn-primary {
    background: var(--accent-cyan, #00fff2);
    color: #000;
    border-color: var(--accent-cyan, #00fff2);
}

.btn-primary:hover {
    background: #fff;
    border-color: #fff;
    box-shadow: var(--neon-cyan, 0 0 20px rgba(0, 255, 242, 0.4));
}

/* Secondary variant */
.btn-secondary {
    background: transparent;
    border-color: rgba(255, 255, 255, 0.2);
}

.btn-secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--accent-cyan, #00fff2);
}

/* ============================================
   INPUTS
   ============================================ */

.input-glass {
    width: 100%;
    padding: var(--space-md, 1rem) var(--space-lg, 1.5rem);
    font-size: var(--font-size-base, 0.875rem);
    color: var(--text-primary, #f1f5f9);
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-lg, 18px);
    outline: none;
    transition:
        background-color var(--transition-normal, 160ms ease-out),
        border-color var(--transition-normal, 160ms ease-out),
        box-shadow var(--transition-normal, 160ms ease-out);
}

.input-glass::placeholder {
    color: var(--text-tertiary, rgba(255, 255, 255, 0.3));
}

.input-glass:focus {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(0, 255, 242, 0.5);
    box-shadow: 0 0 20px rgba(0, 255, 242, 0.1);
}

.input-glass:focus-visible {
    outline: none;
}

/* ============================================
   MODAL / OVERLAY
   ============================================ */

.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(var(--blur-md, 12px));
    -webkit-backdrop-filter: blur(var(--blur-md, 12px));
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: var(--z-modal, 400);
    padding: var(--space-lg, 1.5rem);
}

.modal-content {
    width: 100%;
    max-width: 32rem;
    background: rgba(15, 23, 42, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-2xl, 32px);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
    overflow: hidden;
}

/* ============================================
   TOOLTIP
   ============================================ */

.tooltip {
    position: absolute;
    padding: var(--space-sm, 0.75rem) var(--space-md, 1rem);
    font-size: var(--font-size-xs, 0.625rem);
    font-weight: var(--font-bold, 700);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-primary, #f1f5f9);
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-md, 12px);
    backdrop-filter: blur(var(--blur-md, 12px));
    -webkit-backdrop-filter: blur(var(--blur-md, 12px));
    white-space: nowrap;
    z-index: var(--z-tooltip, 600);
    opacity: 0;
    visibility: hidden;
    transform: translateY(4px);
    transition:
        opacity var(--transition-fast, 120ms ease-out),
        transform var(--transition-fast, 120ms ease-out),
        visibility var(--transition-fast, 120ms ease-out);
}

.tooltip.visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

/* ============================================
   ACTIVITY HEATMAP
   ============================================ */

.heatmap-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: var(--space-xs, 0.5rem);
}

.heatmap-cell {
    aspect-ratio: 1;
    border-radius: var(--radius-sm, 8px);
    border: 1px solid rgba(255, 255, 255, 0.05);
    background: rgba(255, 255, 255, 0.02);
    transition:
        transform var(--transition-fast, 120ms ease-out),
        background-color var(--transition-fast, 120ms ease-out),
        box-shadow var(--transition-fast, 120ms ease-out);
}

.heatmap-cell:hover {
    transform: scale(1.1);
}

.heatmap-cell.level-1 {
    background: rgba(0, 255, 242, 0.1);
}

.heatmap-cell.level-2 {
    background: rgba(0, 255, 242, 0.25);
}

.heatmap-cell.level-3 {
    background: rgba(0, 255, 242, 0.4);
    border-color: rgba(0, 255, 242, 0.3);
    box-shadow: 0 0 10px rgba(0, 255, 242, 0.2);
}

.heatmap-cell.level-4 {
    background: var(--accent-cyan, #00fff2);
    border-color: var(--accent-cyan, #00fff2);
    box-shadow: 0 0 15px rgba(0, 255, 242, 0.4);
}

/* ============================================
   PROGRESS BAR
   ============================================ */

.progress-bar {
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--radius-full, 9999px);
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-cyan, #00fff2), var(--accent-purple, #bc13fe));
    border-radius: var(--radius-full, 9999px);
    transition: width var(--transition-slow, 240ms ease-out);
}

/* ============================================
   AVATAR
   ============================================ */

.avatar {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid rgba(255, 255, 255, 0.1);
    transition: border-color var(--transition-normal, 160ms ease-out);
}

.avatar:hover {
    border-color: rgba(255, 255, 255, 0.3);
}

.avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.avatar-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-secondary, #94a3b8);
    font-weight: var(--font-bold, 700);
}